{"version":3,"file":"iterdate.mjs","sources":["../src/main.js"],"sourcesContent":["/*\nexport enum DateArrayPrecision {\n  Year = 1,\n  Month = 2,\n  Day = 3,\n  Hour = 4,\n  Minute = 5,\n  Second = 6,\n  Millisecond = 7,\n};\n*/\n\nconst noDate = [0, 0, 1, 0, 0, 0, 0];\n\n//------------------------------------------------------------------------------\nexport function date2Array(date, precision = 7) {\n  const ar = [\n    date.getFullYear(),\n    date.getMonth(),\n    date.getDate(),\n    date.getHours(),\n    date.getMinutes(),\n    date.getSeconds(),\n    date.getMilliseconds(),\n  ];\n  return [\n    ...ar.slice(0, precision),\n    ...noDate.slice(precision),\n  ];\n}\n\n//------------------------------------------------------------------------------\nexport function makeYmdHmsDate(date) {\n  return new Date(...date2Array(date, 6));\n}\n\n//------------------------------------------------------------------------------\nexport function makeYmdHmDate(date) {\n  return new Date(...date2Array(date, 5));\n}\n\n//------------------------------------------------------------------------------\nexport function makeYmdHDate(date) {\n  return new Date(...date2Array(date, 4));\n}\n\n//------------------------------------------------------------------------------\nexport function makeYmdDate(date) {\n  return new Date(...date2Array(date, 3));\n}\n\n//------------------------------------------------------------------------------\nexport function makeYmDate(date) {\n  return new Date(...date2Array(date, 2));\n}\n\n//------------------------------------------------------------------------------\nexport function makeYDate(date) {\n  return new Date(...date2Array(date, 1));\n}\n\n//------------------------------------------------------------------------------\nexport function seconds(dtStart, dtEnd, step = 1) {\n  if (step < 1) {\n    throw new RangeError('Step must be >= 1');\n  }\n  const start = makeYmdHmsDate(dtStart);\n  const end = makeYmdHmsDate(dtEnd);\n  return {\n    [Symbol.iterator]: () => mkIterator(start, end, (dt) => {\n      dt.setSeconds(dt.getSeconds() + step);\n    }),\n  };\n}\n\n//------------------------------------------------------------------------------\nexport function minutes(dtStart, dtEnd, step = 1) {\n  if (step < 1) {\n    throw new RangeError('Step must be >= 1');\n  }\n  const start = makeYmdHmDate(dtStart);\n  const end = makeYmdHmDate(dtEnd);\n  return {\n    [Symbol.iterator]: () => mkIterator(start, end, (dt) => {\n      dt.setMinutes(dt.getMinutes() + step);\n    }),\n  };\n}\n\n//------------------------------------------------------------------------------\nexport function hours(dtStart, dtEnd, step = 1) {\n  if (step < 1) {\n    throw new RangeError('Step must be >= 1');\n  }\n  const start = makeYmdHDate(dtStart);\n  const end = makeYmdHDate(dtEnd);\n  return {\n    [Symbol.iterator]: () => mkIterator(start, end, (dt) => {\n      dt.setHours(dt.getHours() + step);\n    }),\n  };\n}\n\n//------------------------------------------------------------------------------\nexport function days(dtStart, dtEnd, step = 1) {\n  if (step < 1) {\n    throw new RangeError('Step must be >= 1');\n  }\n  const start = makeYmdDate(dtStart);\n  const end = makeYmdDate(dtEnd);\n  return {\n    [Symbol.iterator]: () => mkIterator(start, end, (dt) => {\n      dt.setDate(dt.getDate() + step);\n    }),\n  };\n}\n\n//------------------------------------------------------------------------------\nexport function months(dtStart, dtEnd, step = 1) {\n  if (step < 1) {\n    throw new RangeError('Step must be >= 1');\n  }\n  const start = makeYmDate(dtStart);\n  const end = makeYmDate(dtEnd);\n  return {\n    [Symbol.iterator]: () => mkIterator(start, end, (dt) => {\n      dt.setMonth(dt.getMonth() + step);\n    }),\n  };\n}\n\n//------------------------------------------------------------------------------\nexport function years(dtStart, dtEnd, step = 1) {\n  if (step < 1) {\n    throw new RangeError('Step must be >= 1');\n  }\n  const start = makeYDate(dtStart);\n  const end = makeYDate(dtEnd);\n  return {\n    [Symbol.iterator]: () => mkIterator(start, end, (dt) => {\n      dt.setFullYear(dt.getFullYear() + step);\n    }),\n  };\n}\n\n//------------------------------------------------------------------------------\nfunction mkIterator(start, end, increment) {\n  const dt = new Date(start);\n  return {\n    next() {\n      if (dt.valueOf() >= end.valueOf()) {\n        return {\n          done: true,\n        };\n      }\n      const value = new Date(dt);\n      increment(dt);\n      return {\n        value,\n        done: false,\n      };\n    },\n  };\n}\n"],"names":[],"mappings":"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"}